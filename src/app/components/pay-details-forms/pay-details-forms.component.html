<form
  [formGroup]="payDetailsGroup"
  (change)="submitPayDetails()"
>
  <div>
    <app-required-field for="firstName">First Name</app-required-field>
    <input
      type="text"
      name="firstName"
      formControlName="firstName"
    />
  </div>
  <app-form-error [controlElement]="firstName()" />
  <app-form-error
    [controlElement]="firstName()"
    errorType="minlength"
  />
  <app-form-error
    [controlElement]="firstName()"
    errorType="pattern"
    errorMessage="Must start with uppercase letter"
  />

  <div>
    <app-required-field for="lastName">Last Name</app-required-field>
    <input
      type="text"
      name="lastName"
      formControlName="lastName"
    />
  </div>
  <app-form-error [controlElement]="lastName()" />
  <app-form-error
    [controlElement]="lastName()"
    errorType="minlength"
  />
  <app-form-error
    [controlElement]="lastName()"
    errorType="pattern"
    errorMessage="Must start with uppercase letter"
  />

  <div>
    <app-required-field for="age">Age</app-required-field>
    <input
      type="number"
      name="age"
      min="0"
      formControlName="age"
    />
  </div>
  <app-form-error [controlElement]="age()" />
  <app-form-error
    [controlElement]="age()"
    errorType="min"
    errorMessage="Must be at least 18 years old"
  />

  <div>
    <app-required-field for="email">Email</app-required-field>
    <input
      type="email"
      name="email"
      formControlName="email"
    />
  </div>
  <app-form-error [controlElement]="email()" />
  <app-form-error
    [controlElement]="email()"
    errorType="pattern"
    errorMessage="Invalid email!"
  />

  <div>
    <app-required-field for="country">Country</app-required-field>
    <select
      name="country"
      formControlName="country"
    >
      @for (country of countries; track $index) {
      <option [value]="country">{{ country }}</option>
      }
    </select>
  </div>
  <app-form-error [controlElement]="country()" />

  <div>
    <app-required-field for="postalCode">Postal Code</app-required-field>
    <input
      type="text"
      name="postalCode"
      formControlName="postalCode"
    />
  </div>
  <app-form-error [controlElement]="postalCode()" />
  <app-form-error
    [controlElement]="postalCode()"
    errorType="minlength"
  />

  <div>
    <app-required-field for="street">Street</app-required-field>
    <input
      type="text"
      name="street"
      formControlName="street"
    />
  </div>
  <app-form-error [controlElement]="street()" />
  <app-form-error
    [controlElement]="street()"
    errorType="minlength"
  />

  <div>
    <app-required-field for="paymentMethod">Payment Method</app-required-field>
    <select
      name="paymentMethod"
      formControlName="paymentMethod"
    >
      @for (method of paymentMethods; track $index) {
      <option [value]="method">{{ method }}</option>
      }
    </select>
  </div>
  <app-form-error [controlElement]="paymentMethod()" />

  <div>
    <app-required-field for="terms">
      <input
        type="checkbox"
        name="terms"
        formControlName="acceptTerms"
      />
      Accept terms and conditions
    </app-required-field>
  </div>
  <app-form-error [controlElement]="acceptTerms()" />
</form>
